specVersion: 0.0.4
description: LoanMachine contract indexing
repository: https://github.com/your-repo/loan-machine-subgraph
schema:
  file: schema.graphql
dataSources:
  - kind: ethereum/contract
    name: LoanMachine
    network: "31337"
    source:
      address: "0x5FbDB2315678afecb367f032d93F642f64180aa3"
      abi: LoanMachine
      startBlock: 0
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: LoanMachine\LoanMachine.wasm
      entities:
        - Donation
        - Borrow
        - Repayment
        - User
      abis:
        - name: LoanMachine
          file: LoanMachine\LoanMachine.json
      eventHandlers:
        - event: Donated(indexed address,uint256,uint256)
          handler: handleDonated
        - event: Borrowed(indexed address,uint256,uint256)
          handler: handleBorrowed
        - event: Repaid(indexed address,uint256,uint256)
          handler: handleRepaid
        - event: NewDonor(indexed address)
          handler: handleNewDonor
        - event: NewBorrower(indexed address)
          handler: handleNewBorrower
