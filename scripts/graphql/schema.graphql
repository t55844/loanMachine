type Donation @entity(immutable: false) {
  id: ID!
  donor: User! # Changed from Bytes to User
  amount: BigInt!
  timestamp: BigInt!
  totalDonation: BigInt!
}

type Borrow @entity(immutable: false) {
  id: ID!
  borrower: User! # Changed from Bytes to User
  amount: BigInt!
  timestamp: BigInt!
  totalBorrowing: BigInt!
}

type Repayment @entity(immutable: false) {
  id: ID!
  borrower: User! # Changed from Bytes to User
  amount: BigInt!
  timestamp: BigInt!
  remainingDebt: BigInt!
}

type User @entity(immutable: false) {
  id: ID!
  totalDonated: BigInt!
  totalBorrowed: BigInt!
  currentDebt: BigInt!
  lastActivity: BigInt!
  donations: [Donation!]! @derivedFrom(field: "donor")
  borrows: [Borrow!]! @derivedFrom(field: "borrower")
  repayments: [Repayment!]! @derivedFrom(field: "borrower")
}

type Stats @entity(immutable: false) {
  id: ID!
  totalDonations: BigInt!
  totalBorrowed: BigInt!
  availableBalance: BigInt!
}
